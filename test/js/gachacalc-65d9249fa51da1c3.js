(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{9865:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var a=n(8796),r=n(7931),o=n(9337),i=n(2004),c=n(647),s=n(9496),l=n(4637);function u(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,c.Z)(t);if(e){var r=(0,c.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}var d=function(t){(0,o.Z)(n,t);var e=u(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var t,e=(this.props.homePage?"":"max-w-5xl w-full px-1")+(null!==(t=this.props.className)&&void 0!==t?t:"");return(0,l.jsx)("main",{className:e,children:this.props.children})}}]),n}(s.Component)},7309:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return y}});var a=n(4986),r=n(3411),o=n(9372),i=n(9496),c=n(9349),s=n(5027),l=n(9865),u=n(7565),d=n.n(u),m=n(4637);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function x(t,e){return function(n){return n<e?t:t+10*t*(n-e+1)}}r.kL.register(r.f$,r.uw,r.ZL,r.od,r.jn,r.Gu,r.De,r.u);var p={char:{bannerName:"5* Banner character [Genshin Impact/Honkai: Star Rail]",banner:.5,guaranteed:1,minConst:-1,maxConst:6,constFormat:"C",constName:"Constellation",maxPity:90,rate:x(.6,Math.ceil(44/.6))},"4*char":{bannerName:"Specific 4* banner character [Genshin Impact/Honkai: Star Rail]",banner:.5,guaranteed:1/3,minConst:-1,maxConst:6,constFormat:"C",constName:"Constellation",maxPity:10,rate:x(5.1,Math.ceil(44/5.1))},weapon:{bannerName:"Specific 5* banner weapon [Genshin Impact]",banner:.75,guaranteed:.5,guaranteedPity:3,minConst:0,maxConst:5,constFormat:"R",constName:"Refinement",maxPity:80,rate:x(.7,Math.ceil(44/.7))},"4*weapon":{bannerName:"Specific 4* banner weapon [Genshin Impact]",banner:.75,guaranteed:.2,minConst:0,maxConst:5,constFormat:"R",constName:"Refinement",maxPity:10,rate:x(6,Math.ceil(44/6))},weaponHSR:{bannerName:"5* banner weapon [Honkai: Star Rail]",banner:.75,guaranteed:1,minConst:0,maxConst:5,constFormat:"S",constName:"Superimposition",maxPity:80,rate:x(.8,Math.ceil(44/.7))},"HSR4*weapon":{bannerName:"Specific 4* banner weapon [Honkai: Star Rail]",banner:.75,guaranteed:1/3,minConst:0,maxConst:5,constFormat:"S",constName:"Superimposition",maxPity:10,rate:x(6.6,Math.ceil(44/6))}};function y(t){var e,n=t.location,a=(0,i.useState)(-1),r=a[0],u=a[1],f=(0,i.useState)(0),b=f[0],x=f[1],y=(0,i.useState)(90),P=y[0],k=y[1],_=(0,i.useState)(!1),O=_[0],S=_[1],R=(0,i.useState)(0),A=R[0],E=R[1],T=(0,i.useState)(Object.values(p).map((function(t){return t.bannerName}))[0]),Z=T[0],F=T[1],I=null!==(e=Object.values(p).find((function(t){return t.bannerName==Z})))&&void 0!==e?e:Object.values(p)[0],G=(0,i.useMemo)((function(){return function(t,e,n,a,r,o){return function(t,e,n){console.time("calc");var a=function(t,e,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-8,r=[t],o=function(e){var o,i={},c=function(t){if(!(t.rate<=0)){var e=t.pity+(n.maxPity+1)*(t.const+1+(n.maxConst+2)*(+t.guaranteed+2*t.guaranteedPity)),a=i[e];a?a.rate+=t.rate:i[e]=t}},s=g(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l&&!(l.rate<=a))if(l.const>=n.maxConst)c(h({},l));else{var u=l.pity+1,d=n.rate(u)/100;d>1?d=1:d<0&&(d=0);var m=l.guaranteed||n.guaranteedPity&&l.guaranteedPity>=n.guaranteedPity-1?1:n.banner;d<1&&c({pity:u,guaranteed:l.guaranteed,guaranteedPity:l.guaranteedPity,const:l.const,rate:l.rate*(1-d)}),c({pity:0,guaranteed:!1,guaranteedPity:0,const:l.const+1,rate:l.rate*d*m*n.guaranteed}),n.guaranteed<1&&(n.guaranteedPity&&l.guaranteedPity>=n.guaranteedPity-1?c({pity:0,guaranteed:!1,guaranteedPity:0,const:l.const+1,rate:l.rate*d*m*(1-n.guaranteed)}):c({pity:0,guaranteed:!1,guaranteedPity:n.guaranteedPity?l.guaranteedPity+1:0,const:l.const,rate:l.rate*d*m*(1-n.guaranteed)})),m<1&&c({pity:0,guaranteed:!0,guaranteedPity:n.guaranteedPity?l.guaranteedPity+1:0,const:l.const,rate:l.rate*d*(1-m)})}}}catch(f){s.e(f)}finally{s.f()}t=Object.values(i),r.push(t)},i=0;i<e;i++)o(i);return r}([t],e,n,0);return console.timeEnd("calc"),a.map((function(t){var e=[];return t.forEach((function(t){if(0!=t.rate){var n=e[t.const+1];n?n.rate+=t.rate:e[t.const+1]={const:t.const,rate:t.rate}}})),e}))}({pity:e,guaranteed:a,guaranteedPity:r,const:t,rate:1},n,o)}(r,b,P,O,A,I)}),[r,b,P,O,A,I]);function H(t){var e=setTimeout((function(){t()}),3e3);return function(){return clearTimeout(e)}}(0,i.useEffect)((function(){return H((function(){b>=I.maxPity&&x(I.maxPity-1)}))}),[I,b]),(0,i.useEffect)((function(){return H((function(){I.guaranteedPity&&A>=I.guaranteedPity&&E(I.guaranteedPity)}))}),[I,A]),(0,i.useEffect)((function(){return H((function(){r>I.maxConst&&u(I.maxConst)}))}),[I,r]),(0,i.useEffect)((function(){return H((function(){r<I.minConst&&u(I.minConst)}))}),[r,I]);for(var M=[],D=r;D<=I.maxConst;D++)M.push(D);var L="Gacha rate calculator for Genshin Impact.";return(0,m.jsxs)(l.Z,{children:[(0,m.jsxs)(o.default,{children:[(0,m.jsx)("title",{children:"Gacha Rate Calculator | Hu Tao"}),(0,m.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,m.jsx)("meta",{property:"og:title",content:"Gacha Rate Calculator | Hu Tao"}),(0,m.jsx)("meta",{property:"og:description",content:L}),(0,m.jsx)("meta",{name:"description",content:L})]}),(0,m.jsx)("h2",{className:"font-semibold",children:(0,m.jsx)(s.Z,{href:"/tools/",location:n,className:"font-semibold text-lg",children:"Tools"})}),(0,m.jsx)("h1",{className:"text-5xl font-bold pb-2",children:"Gacha rate calculator"}),(0,m.jsx)(N,{label:"Banner type",set:function(t){var e;r==I.minConst&&u((null!==(e=Object.values(p).find((function(e){return e.bannerName==t})))&&void 0!==e?e:Object.values(p)[0]).minConst),F(t)},value:Z,options:Object.values(p).map((function(t){return t.bannerName}))}),(0,m.jsx)(w,{label:"Pulls",set:k,value:P,min:0,max:1260}),(0,m.jsx)(w,{label:"Current ".concat(I.constName.toLowerCase()),set:u,value:r,min:I.minConst,max:I.maxConst}),(0,m.jsx)(w,{label:"Current pity",set:x,value:b,min:0,max:I.maxPity-1}),(0,m.jsx)(C,{label:"Next is guaranteed",set:S,value:O}),I.guaranteedPity&&(0,m.jsx)(w,{label:"Epitomized Path",set:E,value:A,min:0,max:I.guaranteedPity-1}),(0,m.jsx)("h3",{className:"text-lg font-bold pt-1",id:"results",children:"Results"}),(0,m.jsxs)("div",{className:"columns-1 md:columns-2 mr-2 mb-2",children:[(0,m.jsx)("div",{className:"w-full bg-slate-800 rounded-xl p-1 my-2 md:my-0 text-white col-start-1",children:(0,m.jsx)(c.$Q,{data:{labels:G[G.length-1].filter((function(t){return t})).map((function(t){return j(t.const,I)})),datasets:[{label:"Rate",backgroundColor:"rgb(75, 192, 192)",data:G[G.length-1].filter((function(t){return t})).map((function(t,e,n){return 100*t.rate})),borderColor:"white",borderWidth:2,xAxisID:"xAxes"}]},options:{indexAxis:"y",color:"white",backgroundColor:"#333333",scales:{xAxes:{min:0,ticks:{color:"white",callback:function(t){return"".concat(t,"%")}}},yAxes:{ticks:{color:"white"}}}}})}),(0,m.jsx)("div",{className:"w-full bg-slate-800 rounded-xl p-1 my-2 md:my-0 text-white col-start-2",children:(0,m.jsx)(c.x1,{data:{labels:G[G.length-1].filter((function(t){return t})).map((function(t){return j(t.const,I)})),datasets:[{label:"Cumulative rate",borderColor:"rgb(255, 99, 132)",borderWidth:2,fill:!1,data:G[G.length-1].filter((function(t){return t})).map((function(t,e,n){return 100*n.slice(e,n.length).reduce((function(t,e){return t+e.rate}),0)}))}]},options:{indexAxis:"y",color:"white",backgroundColor:"#333333",scales:{xAxes:{max:100,min:0,ticks:{color:"white",callback:function(t){return"".concat(t,"%")}}},yAxes:{ticks:{color:"white"}}}}})})]}),(0,m.jsx)("div",{className:"w-full bg-slate-800 rounded-xl p-1 my-2 md:my-0 text-white col-start-2",children:(0,m.jsx)(c.x1,{data:{labels:G.map((function(t,e){return e})),datasets:M.filter((function(t){return t>r})).map((function(t,e){return{label:j(t,I),backgroundColor:v(t,1),borderColor:v(t,1),fill:{above:v(t,.15),below:v(t,.1),target:t==I.maxConst?"start":e+1},data:G.map((function(e){var n;return 100*(null===e||void 0===e||null===(n=e.filter((function(e){return e.const>=t})))||void 0===n?void 0:n.reduce((function(t,e){return t+e.rate}),0))})),borderWidth:2,xAxisID:"xAxes"}}))},options:{color:"white",backgroundColor:"#333333",interaction:{mode:"index",intersect:!1},scales:{yAxes:{max:100,min:0,ticks:{color:"white",callback:function(t){return"".concat(t,"%")}}},xAxes:{ticks:{color:"white"}}}}})}),(0,m.jsx)("h3",{className:"text-lg font-bold pt-1",id:"table",children:"Rate Table"}),(0,m.jsxs)("table",{className:"table-auto w-80 ".concat(d().table," ").concat(d().stattable," my-2 sm:text-base text-sm"),children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"divide-x divide-gray-200 dark:divide-gray-500",children:[(0,m.jsx)("th",{children:I.constName}),(0,m.jsx)("th",{className:"underline decoration-dotted",title:"Chance to get exactly a certain ".concat(I.constName.toLowerCase()," (and NOT higher) within ").concat(P," pulls (sums up to to 100%)"),children:"Rate"}),(0,m.jsx)("th",{className:"underline decoration-dotted",title:"Chance to get at least ".concat(I.constName.toLowerCase()," (or higher) within ").concat(P," pulls"),children:"Cumulative rate"})]})}),(0,m.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-500",children:G[G.length-1].filter((function(t){return t})).map((function(t,e,n){return(0,m.jsxs)("tr",{className:"pr-1 divide-x divide-gray-200 dark:divide-gray-500 ".concat(t.rate<5e-4?"opacity-60":""),children:[(0,m.jsx)("td",{children:j(t.const,I)}),(0,m.jsxs)("td",{title:"Not owned"==j(t.const,I)?"Chance to NOT get any of the wanted item within ".concat(P," pulls"):"Chance to get exactly ".concat(j(t.const,I)," (and NOT higher) within ").concat(P," pulls"),children:[(100*t.rate).toFixed(3),"%"]}),(0,m.jsxs)("td",{title:"Not owned"==j(t.const,I)?"Chance to get nothing or higher, so basically always 100%":"Chance to get ".concat(j(t.const,I)," or higher within ").concat(P," pulls"),children:[(100*n.slice(e,n.length).reduce((function(t,e){return t+e.rate}),0)).toFixed(2),"%"]})]},t.const)}))})]}),(0,m.jsx)("h3",{className:"text-lg font-bold pt-1",id:"disclaimer",children:"Disclaimer"}),(0,m.jsxs)("p",{children:["The calculator uses the statistical model for drop-rates of Cgg/",(0,m.jsx)(s.Z,{href:"https://genshin-wishes.com/",target:"_blank",children:"genshin-wishes.com"}),". For more information about drop rates, please refer to ",(0,m.jsx)(s.Z,{href:"https://www.hoyolab.com/article/497840",target:"_blank",children:" their HoYoLAB post"}),"."]}),(0,m.jsxs)("p",{children:["Rates indicate the chance to get exactly ",I.constFormat,"x within Y pulls, cumulative rate chance to get ",I.constFormat,"x or higher within Y pulls. Big graph indicates cumulative rate at each pull (read: Z% to get ",I.constFormat,"x ",(0,m.jsx)("i",{children:"within"})," Y pulls)."]}),(0,m.jsx)("p",{children:(0,m.jsxs)("i",{children:[(0,m.jsx)("b",{children:"NOTE"}),": To reduce the amount of calculations, the 4-star character banner calculator will assume there are no 5-stars being dropped. These can prevent a 4 star from dropping, but they still increase the pity counter. It is possible (in-game) to not get a 4-star within 10 pity, but the next pull is guaranteed to be a 4-star if it's not a 5-star."]})})]})}function v(t,e){return["rgba(201,201,201,".concat(e,")"),"rgba(255,99,99,".concat(e,")"),"rgba(255,216,99,".concat(e,")"),"rgba(177,255,99,".concat(e,")"),"rgba(99,255,138,".concat(e,")"),"rgba(99,255,255,".concat(e,")"),"rgba(99,138,255,".concat(e,")"),"rgba(177,99,255,".concat(e,")"),"rgba(255,99,216,".concat(e,")")][t+1]}function j(t,e){return t==e.minConst?"Not owned":"".concat(e.constFormat).concat(t)}function w(t){var e=t.value,n=t.set,a=t.label,r=t.min,o=t.max;return(0,m.jsx)("div",{children:(0,m.jsxs)("label",{children:[a,(0,m.jsx)("input",{className:"bg-slate-200 sm:w-32 w-24 dark:bg-slate-800 rounded-lg px-2 ml-2 mt-1 focus:ring-indigo-500 focus:border-indigo-500",value:e,onChange:function(t){var e=+t.target.value;n(r&&e<r?r:o&&e>o?o:e)},min:r,max:o,type:"number"}),(0,m.jsx)("button",{className:"".concat(e==r?"bg-slate-800 text-slate-50":"bg-red-500 text-slate-50 cursor-pointer"," text-center rounded-lg px-1 inline-block ml-2 md:sr-only"),tabIndex:-1,onClick:function(){return void 0==r||e>r?n(e-1):void 0},children:"Subtract 1"}),(0,m.jsx)("button",{className:"".concat(e==o?"bg-slate-800 text-slate-50":"bg-green-500 text-slate-50 cursor-pointer"," text-center rounded-lg px-1 inline-block ml-2 md:sr-only"),tabIndex:-1,onClick:function(){return void 0==o||e<o?n(e+1):void 0},children:"Add 1"})]})})}function C(t){var e=t.value,n=t.set,a=t.label;return(0,m.jsx)("div",{children:(0,m.jsxs)("label",{children:[a,(0,m.jsx)("input",{className:"bg-slate-200 dark:bg-slate-800 rounded-lg px-2 ml-2 mt-1 focus:ring-indigo-500 focus:border-indigo-500",checked:e,onChange:function(t){return n(t.target.checked)},type:"checkbox"})]})})}function N(t){var e=t.value,n=t.set,a=t.label,r=t.options;return(0,m.jsx)("div",{children:(0,m.jsxs)("label",{children:[a,(0,m.jsx)("select",{value:e,onChange:function(t){return n(t.target.value)},className:"mt-1 ml-2 mb-2 py-0.5 px-2 border border-gray-300 bg-slate-200 dark:bg-slate-800 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:r.map((function(t){return(0,m.jsx)("option",{children:t},t)}))})]})})}},2869:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/gachacalc",function(){return n(7309)}])},7565:function(t){t.exports={autosize:"style_autosize___znCe",fill:"style_fill___5P66",video:"style_video__J3fXM",table:"style_table__dNKBG",stattable:"style_stattable__0eUi_",iconHeight:"style_iconHeight__LP772",mask:"style_mask__AfuL5"}}},function(t){t.O(0,[282,655,774,888,179],(function(){return e=2869,t(t.s=e);var e}));var e=t.O();_N_E=e}]);